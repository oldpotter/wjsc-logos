(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pics/pics"],{"6acc":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n("a34a"));function c(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,c,r,s){try{var i=e[r](s),o=i.value}catch(u){return void n(u)}i.done?t(o):Promise.resolve(o).then(a,c)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,c){var s=e.apply(t,n);function i(e){r(s,a,c,i,o,"next",e)}function o(e){r(s,a,c,i,o,"throw",e)}i(void 0)})}}var i={data:function(){return{choosenImagePaths:[],currentImageIndex:-1,screenWidth:e.getSystemInfoSync().screenWidth,logos:[{path:"../../static/logo2.png"}]}},computed:{currentImagePath:function(){return this.choosenImagePaths[this.currentImageIndex]}},watch:{currentImageIndex:function(){var t=this;e.getImageInfo({src:t.choosenImagePaths[t.currentImageIndex],success:function(e){t.drawPic(e)}})}},methods:{drawPic:function(t){var n=this,a=e.createCanvasContext("myCanvas");a.clearRect(0,0,n.screenWidth,.75*n.screenWidth);var c=n.getCanvasInfo(t,n.screenWidth,.75*n.screenWidth),r=c.dx,s=c.dy,i=c.dWidth,o=c.dHeight;a.drawImage(t.path,-r,-s,i,o),a.drawImage(this.logos[0].path,.05*n.screenWidth,.75*n.screenWidth*.01,n.screenWidth/10,n.screenWidth/10),a.draw()},getCanvasInfo:function(e,t,n){var a=e.width,c=e.height,r=0,s=0;a>c?(s=n,r=a/(c/n),r<t&&(r=t,s=c/(a/t))):(r=t,s=c/(a/t),s<n&&(s=n,r=a/(c/n)));var i=(r-t)/2,o=(s-n)/2;return{dx:i,dy:o,dWidth:r,dHeight:s}},chooseImage:function(){var t=this;e.chooseImage({success:function(e){t.choosenImagePaths=e.tempFilePaths,t.currentImageIndex=0}})},clickImage:function(e){this.currentImageIndex=e},toLogoPage:function(){e.navigateTo({url:"./logos",success:function(e){},fail:function(){},complete:function(){}})},savePicPromise:function(){var t=s(a.default.mark(function t(n){var c;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return c=this,t.abrupt("return",new Promise(function(t,a){e.showLoading({title:"请稍后",mask:!1}),e.getImageInfo({src:n,success:function(n){c.drawPic(n),setTimeout(function(){e.canvasToTempFilePath({canvasId:"myCanvas",fileType:"jpg",success:function(n){e.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function(){e.showToast({title:"保存成功",mask:!1,duration:1500}),t()}})}})},1e3)}})}));case 2:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}(),savePics:function(){var e=this;this.asyncForEach(this.choosenImagePaths,function(){var t=s(a.default.mark(function t(n,c){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(c+"开始"," at pages/pics/pics.vue:189"),t.next=3,e.savePicPromise(n);case 3:console.log(c+"结束"," at pages/pics/pics.vue:191");case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())},asyncForEach:function(){var e=s(a.default.mark(function e(t,n){var c;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c=0;case 1:if(!(c<t.length)){e.next=7;break}return e.next=4,n(t[c],c,t);case 4:c++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}};t.default=i}).call(this,n("6e42")["default"])},"78f1":function(e,t,n){"use strict";n.r(t);var a=n("6acc"),c=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=c.a},a905:function(e,t,n){},ae4a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},c=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c})},c5fd:function(e,t,n){"use strict";n.r(t);var a=n("ae4a"),c=n("78f1");for(var r in c)"default"!==r&&function(e){n.d(t,e,function(){return c[e]})}(r);n("f138");var s=n("2877"),i=Object(s["a"])(c["default"],a["a"],a["b"],!1,null,null,null);t["default"]=i.exports},f138:function(e,t,n){"use strict";var a=n("a905"),c=n.n(a);c.a}},[["0fb9","common/runtime","common/vendor"]]]);